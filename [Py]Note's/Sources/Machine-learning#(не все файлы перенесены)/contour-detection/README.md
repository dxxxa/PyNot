# [How to Detect Contours in Images using OpenCV in Python](https://www.thepythoncode.com/article/contour-detection-opencv-python)
To run this:
- `pip3 install -r requirements.txt`
- To detect contour of the the image `thumbs_up_down.jpg` using 225 value of binary threshold conversion:
    ```
    python contour-detector.py thumbs_up_down.jpg 225
    ```
- For live detection, consider using `live-contour-detector.py` script.
##
# [[] / []]()
Контур – это замкнутая кривая, соединяющая все непрерывные точки, имеющие некоторый цвет или интенсивность, они представляют собой формы объектов, найденных на изображении. Обнаружение контуров является полезным методом для анализа формы, обнаружения и распознавания объектов.

В предыдущем уроке мы обсуждали обнаружение краев с помощью алгоритма Canny, и мы видели, как реализовать его в OpenCV, вы можете спросить, в чем разница между обнаружением краев и обнаружением контуров?

Ну, когда мы выполняем обнаружение краев, мы находим точки, где интенсивность цветов значительно меняется, а затем мы просто включаем эти пиксели. Однако контуры представляют собой абстрактные наборы точек и сегментов, соответствующих формам объектов на изображении. В результате мы можем манипулировать контурами в наших программах, таких как подсчет количества контуров, использование их для категоризации форм объектов, обрезка объектов из изображения (сегментация изображения) и многое другое.

Обнаружение контуров — не единственный алгоритм сегментации изображений, хотя есть много других, таких как современная семантическая сегментация, преобразование hough и сегментация K-Means.

Для большей точности вот весь конвейер, которому мы будем следовать, чтобы успешно обнаружить контуры на изображении:

Преобразуйте изображение в двоичное изображение, это обычная практика, когда входное изображение является двоичным изображением (что должно быть результатом порогового изображения или обнаружения края).
Поиск контуров с помощью функции openCV findContours().
Нарисуйте эти контуры и покажите изображение.
Связанные с: Как применить извлечение функций HOG в Python.

Хорошо, давайте начнем. Во-первых, давайте установим зависимости для этого учебника:

pip3 install matplotlib opencv-python 
Импорт необходимых модулей:

import cv2
import matplotlib.pyplot as plt
Мы будем использовать это изображение для этого учебника:

Большие пальцы вверх и вниз

Давайте загрузим его:

# read the image
image = cv2.imread("thumbs_up_down.jpg")
Преобразование его в RGB, а затем в оттенки серого:

# convert to RGB
image = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)
# convert to grayscale
gray = cv2.cvtColor(image, cv2.COLOR_RGB2GRAY)
Как упоминалось ранее в этом уроке, нам нужно будет создать двоичное изображение, что означает, что каждый пиксель изображения является либо черным, либо белым. Это необходимость в OpenCV, поиск контуров похож на поиск белого объекта на черном фоне, объекты, которые нужно найти, должны быть белыми, а фон должен быть черным.

# create a binary thresholded image
_, binary = cv2.threshold(gray, 225, 255, cv2.THRESH_BINARY_INV)
# show it
plt.imshow(binary, cmap="gray")
plt.show()
Приведенный выше код создает двоичное изображение, отключая (устанавливая значение 0) пикселей, которые имеют значение менее 225 и включая (устанавливая значение 255) пиксели, которые имеют значение более 225, вот выходное изображение:

Двоичное пороговое изображение для определения контура

Теперь OpenCV легко обнаружить контуры:

# find the contours from the thresholded image
contours, hierarchy = cv2.findContours(binary, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)
# draw all contours
image = cv2.drawContours(image, contours, -1, (0, 255, 0), 2)
Приведенный выше код находит контуры внутри двоичного изображения и рисует их толстой зеленой линией к изображению, давайте покажем его:

# show the image with the drawn contours
plt.imshow(image)
plt.show()
Выходное изображение:

Контуры, обнаруженные OpenCV PythonДля достижения хороших результатов на различных и реальных изображениях необходимо настроить пороговое значение или выполнить обнаружение краев. Например, для изображения блинов я снизил порог до 127, вот результат:

Обнаруженные контуры изображения блиновХорошо, это он для этого урока, если вы хотите проверить это на своей живой камере, перейдите по этой ссылке.

СВЯЗАННЫЕ С: Как обнаружить фигуры в изображениях с помощью OpenCV в Python

Вы всегда можете проверить официальную документацию OpenCV для получения дополнительной информации.

Наконец, я собрал некоторые полезные ресурсы и курсы для вас для дальнейшего обучения, я настоятельно рекомендую следующие курсы:

Специализация по машинному обучению на Coursera.
Специализация по глубокому обучению на Coursera.
Введение в компьютерное зрение и обработку изображений